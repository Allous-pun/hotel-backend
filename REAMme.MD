üè® Roomie Explorer Backend API Documentation

**Version:** 1.0
**Base URL:** `http://localhost:5000/api`
**Auth:** JWT-based authentication (Bearer Token required for protected routes)

---

## üîê AUTHENTICATION

**Route Prefix:** `/api/auth`

### 1Ô∏è‚É£ Register User

**POST** `/api/auth/register`
Creates a new user account.

```json
{
  "name": "John Doe",
  "email": "john@example.com",
  "password": "password123",
  "role": "guest" // optional, defaults to guest
}
```

‚úÖ **Response**

```json
{
  "token": "JWT_TOKEN",
  "user": {
    "_id": "...",
    "name": "John Doe",
    "email": "john@example.com",
    "role": "guest"
  }
}
```

---

### 2Ô∏è‚É£ Login

**POST** `/api/auth/login`
Authenticates user and returns JWT.

```json
{
  "email": "john@example.com",
  "password": "password123"
}
```

‚úÖ **Response**

```json
{
  "token": "JWT_TOKEN",
  "user": {
    "_id": "...",
    "name": "John Doe",
    "role": "guest"
  }
}
```

---

### 3Ô∏è‚É£ Get Profile

**GET** `/api/auth/profile`
Requires: `Authorization: Bearer <JWT>`
Returns logged-in user details.

---

## üè† ROOM MANAGEMENT

**Route Prefix:** `/api/rooms`

### 1Ô∏è‚É£ Get All Rooms

**GET** `/api/rooms` *(Public)*

### 2Ô∏è‚É£ Get Room by ID

**GET** `/api/rooms/:roomId` *(Public)*

### 3Ô∏è‚É£ Check Room Availability

**GET** `/api/rooms/:roomId/availability?checkIn=YYYY-MM-DD&checkOut=YYYY-MM-DD` *(Public)*

‚úÖ **Response**

```json
{ "available": true }
```

### 4Ô∏è‚É£ Create Room *(Admin/Staff)*

**POST** `/api/rooms`

```json
{
  "name": "Deluxe Suite",
  "type": "suite",
  "price": 250,
  "description": "Spacious and luxurious",
  "amenities": ["WiFi", "TV"],
  "images": ["https://..."]
}
```

### 5Ô∏è‚É£ Update Room *(Admin/Staff)*

**PUT** `/api/rooms/:roomId`

### 6Ô∏è‚É£ Delete Room *(Admin Only)*

**DELETE** `/api/rooms/:roomId`

---

## üßæ BOOKING MANAGEMENT

**Route Prefix:** `/api/bookings`

### 1Ô∏è‚É£ Create Booking *(User)*

**POST** `/api/bookings`

```json
{
  "room": "roomId",
  "checkIn": "2025-12-20",
  "checkOut": "2025-12-25"
}
```

### 2Ô∏è‚É£ Get My Bookings *(User)*

**GET** `/api/bookings/my`

### 3Ô∏è‚É£ Get All Bookings *(Staff/Admin)*

**GET** `/api/bookings`

### 4Ô∏è‚É£ Get Booking by Code *(Staff/Admin)*

**GET** `/api/bookings/:code`

### 5Ô∏è‚É£ Update Booking Status *(Staff/Admin)*

**PUT** `/api/bookings/:code`

```json
{ "status": "confirmed" }
```

### 6Ô∏è‚É£ Cancel Booking *(Staff/Admin)*

**DELETE** `/api/bookings/:code`

---

## üçΩ FOOD & ORDER MANAGEMENT

**Route Prefix:** `/api/foods`

### 1Ô∏è‚É£ Get All Foods *(Public)*

**GET** `/api/foods`

### 2Ô∏è‚É£ Add Food *(Admin/Staff)*

**POST** `/api/foods`

```json
{
  "name": "Pasta Carbonara",
  "category": "Main Course",
  "price": 25,
  "description": "Italian classic",
  "image": "https://..."
}
```

### 3Ô∏è‚É£ Update Food *(Admin/Staff)*

**PUT** `/api/foods/:id`

### 4Ô∏è‚É£ Delete Food *(Admin)*

**DELETE** `/api/foods/:id`

### 5Ô∏è‚É£ Place Order *(User)*

**POST** `/api/foods/order`

```json
{
  "items": [
    { "food": "foodId1", "quantity": 2 },
    { "food": "foodId2", "quantity": 1 }
  ]
}
```

### 6Ô∏è‚É£ Get My Orders *(User)*

**GET** `/api/foods/orders/my`

### 7Ô∏è‚É£ Get All Orders *(Staff/Admin)*

**GET** `/api/foods/orders`

### 8Ô∏è‚É£ Get Order by Code *(Staff/Admin)*

**GET** `/api/foods/orders/code/:orderCode`

### 9Ô∏è‚É£ Update Order Status *(Staff/Admin)*

**PUT** `/api/foods/orders/code/:orderCode`

```json
{ "status": "ready" }
```

---

## üéâ EVENT MANAGEMENT

**Route Prefix:** `/api/events`

### 1Ô∏è‚É£ Get All Events *(Public)*

**GET** `/api/events`

### 2Ô∏è‚É£ Get Event by Code *(Public)*

**GET** `/api/events/:eventCode`

### 3Ô∏è‚É£ Check Event Availability *(Public)*

**GET** `/api/events/:eventId/availability?startDate=2025-12-31&endDate=2026-01-01`

### 4Ô∏è‚É£ Create Event *(Admin/Staff)*

**POST** `/api/events`

```json
{
  "name": "New Year Party",
  "description": "Celebrate with us",
  "location": "Grand Hall",
  "date": "2025-12-31T20:00:00.000Z",
  "capacity": 200,
  "images": ["https://..."]
}
```

### 5Ô∏è‚É£ Update Event *(Admin/Staff)*

**PUT** `/api/events/:eventCode`

### 6Ô∏è‚É£ Delete Event *(Admin)*

**DELETE** `/api/events/:eventCode`

### 7Ô∏è‚É£ Book Event *(User)*

**POST** `/api/events/book`

```json
{
  "event": "eventId",
  "guestsCount": 4,
  "startDate": "2025-12-31T20:00:00.000Z",
  "endDate": "2026-01-01T02:00:00.000Z",
  "notes": "Celebrating with family"
}
```

### 8Ô∏è‚É£ Get My Event Bookings *(User)*

**GET** `/api/events/my`

### 9Ô∏è‚É£ Manage Event Bookings *(Staff/Admin)*

* **GET** `/api/events/bookings`
* **GET** `/api/events/bookings/:reservationCode`
* **PUT** `/api/events/bookings/:reservationCode`
* **DELETE** `/api/events/bookings/:reservationCode`

---

## ‚öôÔ∏è SETTINGS (Admin Only)

**Route Prefix:** `/api/settings`

| Endpoint         | Method | Role         | Description                                       |
| ---------------- | ------ | ------------ | ------------------------------------------------- |
| `/`              | GET    | Admin, Staff | View current system settings                      |
| `/`              | PUT    | Admin        | Update all settings                               |
| `/info`          | PUT    | Admin        | Update restaurant info                            |
| `/hours`         | PUT    | Admin        | Update operating hours                            |
| `/notifications` | PUT    | Admin        | Update notification preferences                   |
| `/security`      | PUT    | Admin        | Toggle 2FA, update password policy                |
| `/system`        | PUT    | Admin        | Maintenance mode, self-registration, auto-confirm |
| `/password`      | PUT    | Admin        | Change admin password                             |

‚úÖ **Example**

```json
{
  "notifications": {
    "preferences": { "newBookings": false, "foodOrders": true },
    "deliveryMethod": { "inApp": true },
    "enabled": true
  }
}
```

---

## üë• USER MANAGEMENT

**Route Prefix:** `/api/users`

| Endpoint | Method | Role         | Description           |
| -------- | ------ | ------------ | --------------------- |
| `/`      | GET    | Admin        | Get all users         |
| `/:id`   | GET    | Admin, Staff | Get single user by ID |

---

## üîí ROLES

| Role    | Description                                        | Access Level |
| ------- | -------------------------------------------------- | ------------ |
| `guest` | Regular user (can book rooms, events, order food)  | Basic        |
| `staff` | Hotel staff (manage bookings, food, events)        | Elevated     |
| `admin` | System admin (full access, manage settings, users) | Full         |

---


# üè® **Roomie Explorer Backend Role Capabilities**

## üëë **ADMIN CAPABILITIES**

Admins have **full system control**, including security, configuration, and user management.
They manage everything staff can, plus **system-level and sensitive operations**.

### ‚úÖ **Admin Can:**

#### üîê Authentication & Users

* View all users ‚Üí `GET /api/users`
* Get single user details ‚Üí `GET /api/users/:id`
* Manage admin/staff accounts (via special secret keys)
* Change admin password ‚Üí `PUT /api/settings/password`

#### üè† Rooms

* Create new rooms ‚Üí `POST /api/rooms`
* Update room info ‚Üí `PUT /api/rooms/:roomId`
* Delete a room ‚Üí `DELETE /api/rooms/:roomId` üö´ *(Staff cannot do this)*

#### üßæ Bookings

* View all bookings ‚Üí `GET /api/bookings`
* View a booking by code ‚Üí `GET /api/bookings/:code`
* Update booking status ‚Üí `PUT /api/bookings/:code`
* Cancel booking ‚Üí `DELETE /api/bookings/:code`

#### üçΩ Food & Orders

* Create new menu items ‚Üí `POST /api/foods`
* Update existing food ‚Üí `PUT /api/foods/:id`
* Delete food ‚Üí `DELETE /api/foods/:id` üö´ *(Staff cannot do this)*
* View all orders ‚Üí `GET /api/foods/orders`
* Manage order statuses ‚Üí `PUT /api/foods/orders/code/:orderCode`

#### üéâ Events

* Create new events ‚Üí `POST /api/events`
* Update event ‚Üí `PUT /api/events/:eventCode`
* Delete event ‚Üí `DELETE /api/events/:eventCode` üö´ *(Staff cannot do this)*
* View & manage event bookings ‚Üí

  * `GET /api/events/bookings`
  * `GET /api/events/bookings/:reservationCode`
  * `PUT /api/events/bookings/:reservationCode`
  * `DELETE /api/events/bookings/:reservationCode`

#### ‚öôÔ∏è System Settings

* Full access to system configuration:

  * `PUT /api/settings`
  * Update restaurant info ‚Üí `/api/settings/info`
  * Update hours ‚Üí `/api/settings/hours`
  * Update notifications ‚Üí `/api/settings/notifications`
  * Update security policies ‚Üí `/api/settings/security`
  * Toggle maintenance mode, registration ‚Üí `/api/settings/system`
* Enable/disable **2FA**
* Configure **password policy**
* Toggle **booking auto-confirm**, **maintenance mode**, etc.

---

## üßë‚Äçüíº **STAFF CAPABILITIES**

Staff members handle **operational tasks** ‚Äî bookings, food orders, events, and room updates.
They help run daily hotel activities but **don‚Äôt control system-wide or security settings**.

### ‚úÖ **Staff Can:**

#### üè† Rooms

* View all rooms ‚Üí `GET /api/rooms`
* Get room details ‚Üí `GET /api/rooms/:roomId`
* Create new rooms ‚Üí `POST /api/rooms`
* Update rooms ‚Üí `PUT /api/rooms/:roomId`

‚ùå Cannot delete rooms.

---

#### üßæ Bookings

* View all bookings ‚Üí `GET /api/bookings`
* Get booking by code ‚Üí `GET /api/bookings/:code`
* Update booking status ‚Üí `PUT /api/bookings/:code`
* Cancel booking ‚Üí `DELETE /api/bookings/:code`

---

#### üçΩ Food & Orders

* View all menu items ‚Üí `GET /api/foods`
* Add food items ‚Üí `POST /api/foods`
* Update food ‚Üí `PUT /api/foods/:id`
* View all orders ‚Üí `GET /api/foods/orders`
* Update order status ‚Üí `PUT /api/foods/orders/code/:orderCode`

‚ùå Cannot delete food items.

---

#### üéâ Events

* Create new events ‚Üí `POST /api/events`
* Update events ‚Üí `PUT /api/events/:eventCode`
* View and manage event bookings ‚Üí same as admin:

  * `GET /api/events/bookings`
  * `PUT /api/events/bookings/:reservationCode`

‚ùå Cannot delete events.

---

#### ‚öôÔ∏è Settings

* View current system settings ‚Üí `GET /api/settings`

‚ùå Cannot modify settings or system configurations.

---

## üö´ **Staff Cannot:**

| Area     | Restricted Action                               | Admin Only? |
| -------- | ----------------------------------------------- | ----------- |
| Rooms    | Delete rooms                                    | ‚úÖ           |
| Food     | Delete food items                               | ‚úÖ           |
| Events   | Delete events                                   | ‚úÖ           |
| Users    | View all users or manage accounts               | ‚úÖ           |
| Settings | Update restaurant info, hours, or notifications | ‚úÖ           |
| Security | Manage password policies or 2FA                 | ‚úÖ           |
| System   | Toggle maintenance mode or self-registration    | ‚úÖ           |
| Password | Change admin password                           | ‚úÖ           |

---

## ü§ù **Admin & Staff Shared Permissions**

| Function              | Endpoint                       | Notes                                      |
| --------------------- | ------------------------------ | ------------------------------------------ |
| Manage rooms          | `POST/PUT /api/rooms`          | Both can create/update rooms               |
| Manage bookings       | `GET/PUT/DELETE /api/bookings` | Both can view, confirm, or cancel bookings |
| Manage food menu      | `POST/PUT /api/foods`          | Both can add/update menu items             |
| Manage orders         | `GET/PUT /api/foods/orders`    | Both can process food orders               |
| Manage events         | `POST/PUT /api/events`         | Both can create and edit events            |
| Manage event bookings | `GET/PUT /api/events/bookings` | Both can confirm or update event bookings  |
| View settings         | `GET /api/settings`            | Read-only for staff                        |

---

## üß≠ Summary Table

| Feature                | Guest | Staff | Admin |
| ---------------------- | ----- | ----- | ----- |
| View rooms             | ‚úÖ     | ‚úÖ     | ‚úÖ     |
| Manage rooms           | ‚ùå     | ‚úÖ     | ‚úÖ     |
| Delete rooms           | ‚ùå     | ‚ùå     | ‚úÖ     |
| Create bookings        | ‚úÖ     | ‚úÖ     | ‚úÖ     |
| Manage all bookings    | ‚ùå     | ‚úÖ     | ‚úÖ     |
| Manage food menu       | ‚ùå     | ‚úÖ     | ‚úÖ     |
| Delete food            | ‚ùå     | ‚ùå     | ‚úÖ     |
| Manage food orders     | ‚ùå     | ‚úÖ     | ‚úÖ     |
| Manage events          | ‚ùå     | ‚úÖ     | ‚úÖ     |
| Delete events          | ‚ùå     | ‚ùå     | ‚úÖ     |
| Manage settings        | ‚ùå     | ‚ùå     | ‚úÖ     |
| Manage users           | ‚ùå     | ‚ùå     | ‚úÖ     |
| Security configuration | ‚ùå     | ‚ùå     | ‚úÖ     |

---


