ğŸ¨ Roomie Explorer Backend API Documentation

**Version:** 1.0
**Base URL:** `http://localhost:5000/api`
**Auth:** JWT-based authentication (Bearer Token required for protected routes)

---

## ğŸ” AUTHENTICATION

**Route Prefix:** `/api/auth`

### 1ï¸âƒ£ Register User

**POST** `/api/auth/register`
Creates a new user account.

```json
{
  "name": "John Doe",
  "email": "john@example.com",
  "password": "password123",
  "role": "guest" // optional, defaults to guest
}
```

âœ… **Response**

```json
{
  "token": "JWT_TOKEN",
  "user": {
    "_id": "...",
    "name": "John Doe",
    "email": "john@example.com",
    "role": "guest"
  }
}
```

---

### 2ï¸âƒ£ Login

**POST** `/api/auth/login`
Authenticates user and returns JWT.

```json
{
  "email": "john@example.com",
  "password": "password123"
}
```

âœ… **Response**

```json
{
  "token": "JWT_TOKEN",
  "user": {
    "_id": "...",
    "name": "John Doe",
    "role": "guest"
  }
}
```

---

### 3ï¸âƒ£ Get Profile

**GET** `/api/auth/profile`
Requires: `Authorization: Bearer <JWT>`
Returns logged-in user details.

---

## ğŸ  ROOM MANAGEMENT

**Route Prefix:** `/api/rooms`

### 1ï¸âƒ£ Get All Rooms

**GET** `/api/rooms` *(Public)*

### 2ï¸âƒ£ Get Room by ID

**GET** `/api/rooms/:roomId` *(Public)*

### 3ï¸âƒ£ Check Room Availability

**GET** `/api/rooms/:roomId/availability?checkIn=YYYY-MM-DD&checkOut=YYYY-MM-DD` *(Public)*

âœ… **Response**

```json
{ "available": true }
```

### 4ï¸âƒ£ Create Room *(Admin/Staff)*

**POST** `/api/rooms`

```json
{
  "name": "Deluxe Suite",
  "type": "suite",
  "price": 250,
  "description": "Spacious and luxurious",
  "amenities": ["WiFi", "TV"],
  "images": ["https://..."]
}
```

### 5ï¸âƒ£ Update Room *(Admin/Staff)*

**PUT** `/api/rooms/:roomId`

### 6ï¸âƒ£ Delete Room *(Admin Only)*

**DELETE** `/api/rooms/:roomId`

---

## ğŸ§¾ BOOKING MANAGEMENT

**Route Prefix:** `/api/bookings`

### 1ï¸âƒ£ Create Booking *(User)*

**POST** `/api/bookings`

```json
{
  "room": "roomId",
  "checkIn": "2025-12-20",
  "checkOut": "2025-12-25"
}
```

### 2ï¸âƒ£ Get My Bookings *(User)*

**GET** `/api/bookings/my`

### 3ï¸âƒ£ Get All Bookings *(Staff/Admin)*

**GET** `/api/bookings`

### 4ï¸âƒ£ Get Booking by Code *(Staff/Admin)*

**GET** `/api/bookings/:code`

### 5ï¸âƒ£ Update Booking Status *(Staff/Admin)*

**PUT** `/api/bookings/:code`

```json
{ "status": "confirmed" }
```

### 6ï¸âƒ£ Cancel Booking *(Staff/Admin)*

**DELETE** `/api/bookings/:code`

---

## ğŸ½ FOOD & ORDER MANAGEMENT

**Route Prefix:** `/api/foods`

### 1ï¸âƒ£ Get All Foods *(Public)*

**GET** `/api/foods`

### 2ï¸âƒ£ Add Food *(Admin/Staff)*

**POST** `/api/foods`

```json
{
  "name": "Pasta Carbonara",
  "category": "Main Course",
  "price": 25,
  "description": "Italian classic",
  "image": "https://..."
}
```

### 3ï¸âƒ£ Update Food *(Admin/Staff)*

**PUT** `/api/foods/:id`

### 4ï¸âƒ£ Delete Food *(Admin)*

**DELETE** `/api/foods/:id`

### 5ï¸âƒ£ Place Order *(User)*

**POST** `/api/foods/order`

```json
{
  "items": [
    { "food": "foodId1", "quantity": 2 },
    { "food": "foodId2", "quantity": 1 }
  ]
}
```

### 6ï¸âƒ£ Get My Orders *(User)*

**GET** `/api/foods/orders/my`

### 7ï¸âƒ£ Get All Orders *(Staff/Admin)*

**GET** `/api/foods/orders`

### 8ï¸âƒ£ Get Order by Code *(Staff/Admin)*

**GET** `/api/foods/orders/code/:orderCode`

### 9ï¸âƒ£ Update Order Status *(Staff/Admin)*

**PUT** `/api/foods/orders/code/:orderCode`

```json
{ "status": "ready" }
```

---

## ğŸ‰ EVENT MANAGEMENT

**Route Prefix:** `/api/events`

### 1ï¸âƒ£ Get All Events *(Public)*

**GET** `/api/events`

### 2ï¸âƒ£ Get Event by Code *(Public)*

**GET** `/api/events/:eventCode`

### 3ï¸âƒ£ Check Event Availability *(Public)*

**GET** `/api/events/:eventId/availability?startDate=2025-12-31&endDate=2026-01-01`

### 4ï¸âƒ£ Create Event *(Admin/Staff)*

**POST** `/api/events`

```json
{
  "name": "New Year Party",
  "description": "Celebrate with us",
  "location": "Grand Hall",
  "date": "2025-12-31T20:00:00.000Z",
  "capacity": 200,
  "images": ["https://..."]
}
```

### 5ï¸âƒ£ Update Event *(Admin/Staff)*

**PUT** `/api/events/:eventCode`

### 6ï¸âƒ£ Delete Event *(Admin)*

**DELETE** `/api/events/:eventCode`

### 7ï¸âƒ£ Book Event *(User)*

**POST** `/api/events/book`

```json
{
  "event": "eventId",
  "guestsCount": 4,
  "startDate": "2025-12-31T20:00:00.000Z",
  "endDate": "2026-01-01T02:00:00.000Z",
  "notes": "Celebrating with family"
}
```

### 8ï¸âƒ£ Get My Event Bookings *(User)*

**GET** `/api/events/my`

### 9ï¸âƒ£ Manage Event Bookings *(Staff/Admin)*

* **GET** `/api/events/bookings`
* **GET** `/api/events/bookings/:reservationCode`
* **PUT** `/api/events/bookings/:reservationCode`
* **DELETE** `/api/events/bookings/:reservationCode`

---

## âš™ï¸ SETTINGS (Admin Only)

**Route Prefix:** `/api/settings`

| Endpoint         | Method | Role         | Description                                       |
| ---------------- | ------ | ------------ | ------------------------------------------------- |
| `/`              | GET    | Admin, Staff | View current system settings                      |
| `/`              | PUT    | Admin        | Update all settings                               |
| `/info`          | PUT    | Admin        | Update restaurant info                            |
| `/hours`         | PUT    | Admin        | Update operating hours                            |
| `/notifications` | PUT    | Admin        | Update notification preferences                   |
| `/security`      | PUT    | Admin        | Toggle 2FA, update password policy                |
| `/system`        | PUT    | Admin        | Maintenance mode, self-registration, auto-confirm |
| `/password`      | PUT    | Admin        | Change admin password                             |

âœ… **Example**

```json
{
  "notifications": {
    "preferences": { "newBookings": false, "foodOrders": true },
    "deliveryMethod": { "inApp": true },
    "enabled": true
  }
}
```

---

## ğŸ‘¥ USER MANAGEMENT

**Route Prefix:** `/api/users`

| Endpoint | Method | Role         | Description           |
| -------- | ------ | ------------ | --------------------- |
| `/`      | GET    | Admin        | Get all users         |
| `/:id`   | GET    | Admin, Staff | Get single user by ID |

---

## ğŸ”’ ROLES

| Role    | Description                                        | Access Level |
| ------- | -------------------------------------------------- | ------------ |
| `guest` | Regular user (can book rooms, events, order food)  | Basic        |
| `staff` | Hotel staff (manage bookings, food, events)        | Elevated     |
| `admin` | System admin (full access, manage settings, users) | Full         |

---


# ğŸ¨ **Roomie Explorer Backend Role Capabilities**

## ğŸ‘‘ **ADMIN CAPABILITIES**

Admins have **full system control**, including security, configuration, and user management.
They manage everything staff can, plus **system-level and sensitive operations**.

### âœ… **Admin Can:**

#### ğŸ” Authentication & Users

* View all users â†’ `GET /api/users`
* Get single user details â†’ `GET /api/users/:id`
* Manage admin/staff accounts (via special secret keys)
* Change admin password â†’ `PUT /api/settings/password`

#### ğŸ  Rooms

* Create new rooms â†’ `POST /api/rooms`
* Update room info â†’ `PUT /api/rooms/:roomId`
* Delete a room â†’ `DELETE /api/rooms/:roomId` ğŸš« *(Staff cannot do this)*

#### ğŸ§¾ Bookings

* View all bookings â†’ `GET /api/bookings`
* View a booking by code â†’ `GET /api/bookings/:code`
* Update booking status â†’ `PUT /api/bookings/:code`
* Cancel booking â†’ `DELETE /api/bookings/:code`

#### ğŸ½ Food & Orders

* Create new menu items â†’ `POST /api/foods`
* Update existing food â†’ `PUT /api/foods/:id`
* Delete food â†’ `DELETE /api/foods/:id` ğŸš« *(Staff cannot do this)*
* View all orders â†’ `GET /api/foods/orders`
* Manage order statuses â†’ `PUT /api/foods/orders/code/:orderCode`

#### ğŸ‰ Events

* Create new events â†’ `POST /api/events`
* Update event â†’ `PUT /api/events/:eventCode`
* Delete event â†’ `DELETE /api/events/:eventCode` ğŸš« *(Staff cannot do this)*
* View & manage event bookings â†’

  * `GET /api/events/bookings`
  * `GET /api/events/bookings/:reservationCode`
  * `PUT /api/events/bookings/:reservationCode`
  * `DELETE /api/events/bookings/:reservationCode`

#### âš™ï¸ System Settings

* Full access to system configuration:

  * `PUT /api/settings`
  * Update restaurant info â†’ `/api/settings/info`
  * Update hours â†’ `/api/settings/hours`
  * Update notifications â†’ `/api/settings/notifications`
  * Update security policies â†’ `/api/settings/security`
  * Toggle maintenance mode, registration â†’ `/api/settings/system`
* Enable/disable **2FA**
* Configure **password policy**
* Toggle **booking auto-confirm**, **maintenance mode**, etc.

---

## ğŸ§‘â€ğŸ’¼ **STAFF CAPABILITIES**

Staff members handle **operational tasks** â€” bookings, food orders, events, and room updates.
They help run daily hotel activities but **donâ€™t control system-wide or security settings**.

### âœ… **Staff Can:**

#### ğŸ  Rooms

* View all rooms â†’ `GET /api/rooms`
* Get room details â†’ `GET /api/rooms/:roomId`
* Create new rooms â†’ `POST /api/rooms`
* Update rooms â†’ `PUT /api/rooms/:roomId`

âŒ Cannot delete rooms.

---

#### ğŸ§¾ Bookings

* View all bookings â†’ `GET /api/bookings`
* Get booking by code â†’ `GET /api/bookings/:code`
* Update booking status â†’ `PUT /api/bookings/:code`
* Cancel booking â†’ `DELETE /api/bookings/:code`

---

#### ğŸ½ Food & Orders

* View all menu items â†’ `GET /api/foods`
* Add food items â†’ `POST /api/foods`
* Update food â†’ `PUT /api/foods/:id`
* View all orders â†’ `GET /api/foods/orders`
* Update order status â†’ `PUT /api/foods/orders/code/:orderCode`

âŒ Cannot delete food items.

---

#### ğŸ‰ Events

* Create new events â†’ `POST /api/events`
* Update events â†’ `PUT /api/events/:eventCode`
* View and manage event bookings â†’ same as admin:

  * `GET /api/events/bookings`
  * `PUT /api/events/bookings/:reservationCode`

âŒ Cannot delete events.

---

#### âš™ï¸ Settings

* View current system settings â†’ `GET /api/settings`

âŒ Cannot modify settings or system configurations.

---

## ğŸš« **Staff Cannot:**

| Area     | Restricted Action                               | Admin Only? |
| -------- | ----------------------------------------------- | ----------- |
| Rooms    | Delete rooms                                    | âœ…           |
| Food     | Delete food items                               | âœ…           |
| Events   | Delete events                                   | âœ…           |
| Users    | View all users or manage accounts               | âœ…           |
| Settings | Update restaurant info, hours, or notifications | âœ…           |
| Security | Manage password policies or 2FA                 | âœ…           |
| System   | Toggle maintenance mode or self-registration    | âœ…           |
| Password | Change admin password                           | âœ…           |

---

## ğŸ¤ **Admin & Staff Shared Permissions**

| Function              | Endpoint                       | Notes                                      |
| --------------------- | ------------------------------ | ------------------------------------------ |
| Manage rooms          | `POST/PUT /api/rooms`          | Both can create/update rooms               |
| Manage bookings       | `GET/PUT/DELETE /api/bookings` | Both can view, confirm, or cancel bookings |
| Manage food menu      | `POST/PUT /api/foods`          | Both can add/update menu items             |
| Manage orders         | `GET/PUT /api/foods/orders`    | Both can process food orders               |
| Manage events         | `POST/PUT /api/events`         | Both can create and edit events            |
| Manage event bookings | `GET/PUT /api/events/bookings` | Both can confirm or update event bookings  |
| View settings         | `GET /api/settings`            | Read-only for staff                        |

---

## ğŸ§­ Summary Table

| Feature                | Guest | Staff | Admin |
| ---------------------- | ----- | ----- | ----- |
| View rooms             | âœ…     | âœ…     | âœ…     |
| Manage rooms           | âŒ     | âœ…     | âœ…     |
| Delete rooms           | âŒ     | âŒ     | âœ…     |
| Create bookings        | âœ…     | âœ…     | âœ…     |
| Manage all bookings    | âŒ     | âœ…     | âœ…     |
| Manage food menu       | âŒ     | âœ…     | âœ…     |
| Delete food            | âŒ     | âŒ     | âœ…     |
| Manage food orders     | âŒ     | âœ…     | âœ…     |
| Manage events          | âŒ     | âœ…     | âœ…     |
| Delete events          | âŒ     | âŒ     | âœ…     |
| Manage settings        | âŒ     | âŒ     | âœ…     |
| Manage users           | âŒ     | âŒ     | âœ…     |
| Security configuration | âŒ     | âŒ     | âœ…     |

---


